language: c
sudo: false
notifications: false
before_install:
  - source <(curl -SLs https://gist.githubusercontent.com/Quanghoster/3d515cba13e7452604c301de16a13b00/raw/4807fbbb1dfa7c46e978f6d4c1e6b5a24e0c3141/arduino_and_esp8266_from_github_install.sh)
install:
  - mkdir -p $HOME/arduino_ide/libraries/
  - cd $HOME/arduino_ide/libraries/
  - git clone --branch 2.1.4 https://github.com/Makuna/NeoPixelBus.git
  - git clone https://github.com/interactive-matter/aJson.git
  - git clone https://github.com/PaulStoffregen/Time.git
  - git clone https://github.com/gmag11/NtpClient.git
  - sed -i -e 's|#define PRINT_BUFFER_LEN 256|#define PRINT_BUFFER_LEN 4096|g'  aJson/aJSON.h
  - cd -
script:
  - sed -i -e 's|#include "/secrets.h"|//#include "/secrets.h"|g' ESP8266HueEmulator/ESP8266HueEmulator.ino
  - sed -i -e 's|//const char|const char|g' ESP8266HueEmulator/ESP8266HueEmulator.ino
  - build_platform esp8266
